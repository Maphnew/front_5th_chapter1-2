var V=Object.defineProperty;var W=(t,e,n)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>W(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const F=()=>{const t=new Set;return{subscribe:r=>t.add(r),notify:()=>t.forEach(r=>r())}},K=(t,e)=>{const{subscribe:n,notify:r}=F();let a={...t};const o=c=>{a={...a,...c},r()},l=()=>({...a}),i=Object.fromEntries(Object.entries(e).map(([c,w])=>[c,(...S)=>o(w(l(),...S))]));return{getState:l,setState:o,subscribe:n,actions:i}},Y=(t,e=window.localStorage)=>({get:()=>JSON.parse(e.getItem(t)),set:o=>e.setItem(t,JSON.stringify(o)),reset:()=>e.removeItem(t)}),k=!0,N="/front_5th_chapter1-1";console.log(N,k);const ft=t=>{const{subscribe:e,notify:n}=F(),r=()=>window.location.pathname,a=()=>t[N+r()],o=l=>{window.history.pushState(null,null,l),n()};return window.addEventListener("popstate",()=>n()),{get path(){return r()},push:o,subscribe:e,getTarget:a}};function s(t,e,...n){return{type:t,props:e,children:n.flat(1/0).filter(r=>r===0||!!r)}}const d=new Map,q=new Set,z=t=>{var n;const e=(n=d.get(t.target))==null?void 0:n.get(t.type);e==null||e(t)};function Q(t){q.forEach(e=>{t.addEventListener(e,z)})}function T(t,e,n){q.add(e),d.has(t)||d.set(t,new Map),d.get(t).set(e,n)}function C(t,e,n){const r=d.get(t);r!=null&&r.has(e)&&r.delete(e),typeof n!="function"&&console.log("wow")}function m(t){if(t===null||typeof t>"u"||typeof t=="boolean")return document.createTextNode("");if(typeof t=="string"||typeof t=="number")return document.createTextNode(t);if(Array.isArray(t)){const o=document.createDocumentFragment();return o.append(...t.map(m)),o}if(typeof t=="function")throw new Error;const{type:e,props:n,children:r}=t,a=document.createElement(e);return n&&X(a,n),r&&r.forEach(o=>{a.append(m(o))}),a}function X(t,e){Object.entries(e).forEach(([n,r])=>{n==="className"&&(n="class"),typeof r=="function"?T(t,n.replace("on","").toLowerCase(),r):t.setAttribute(n,r)})}function b(t){if(t===null||typeof t>"u"||typeof t=="boolean")return"";if(typeof t=="string"||typeof t=="number")return String(t);if(Array.isArray(t))return t.map(b).filter(e=>e!=="");if(typeof t.type=="function"){const e=t.type({...t.props,children:t.children});return b(e)}return{type:t.type,props:t.props,children:b(t.children)}}function Z(t,e,n){n!==null&&typeof n<"u"&&Object.entries(n).forEach(([r,a])=>{e[r]!==n[r]&&(r.startsWith("on")&&typeof a=="function"&&C(t,r.replace("on","").toLowerCase(),a),t.removeAttribute(r))}),e!==null&&typeof e<"u"&&Object.entries(e).forEach(([r,a])=>{if(r.startsWith("on")&&typeof a=="function"){const o=r.replace("on","").toLowerCase();typeof n[r]=="function"&&C(t,o,n[r]),T(t,o,a)}else r==="className"&&(r="class"),t.setAttribute(r,a)})}function $(t,e,n,r=0){var l,i;if(!t)return;const a=t.childNodes[r];if(e&&!n){t.append(m(e));return}if(!e&&n){t.removeChild(a);return}if(typeof e=="string"&&typeof n=="string"){if(e===n)return;t.replaceChild(m(e),a);return}if(Z(a,(e==null?void 0:e.props)||{},(n==null?void 0:n.props)||{}),e.type!==n.type){t.replaceChild(m(e),a);return}const o=Math.max(((l=e==null?void 0:e.children)==null?void 0:l.length)||0,((i=n==null?void 0:n.children)==null?void 0:i.length)||0);if(o>0)for(let c=0;c<o;c++)$(a,e==null?void 0:e.children[c],n==null?void 0:n.children[c],c)}let D=new Map;function _(t,e){const n=b(t);if(e.childNodes.length===0)e.append(m(n)),D.set(e,n);else{const r=D.get(e);D.set(e,n),$(e,n,r)}Q(e)}const tt=1e3,I=tt*60,P=I*60,et=P*24,nt=t=>{const e=Date.now()-t;return e<I?"방금 전":e<P?`${Math.floor(e/I)}분 전`:e<et?`${Math.floor(e/P)}시간 전`:new Date(t).toLocaleString()},g=Y("user"),st=1e3,p=st*60,rt=p*60,u=K({currentUser:g.get(),loggedIn:!!g.get(),posts:[{id:1,author:"홍길동",time:Date.now()-5*p,content:"오늘 날씨가 정말 좋네요. 다들 좋은 하루 보내세요!",likeUsers:[]},{id:2,author:"김철수",time:Date.now()-15*p,content:"새로운 프로젝트를 시작했어요. 열심히 코딩 중입니다!",likeUsers:[]},{id:3,author:"이영희",time:Date.now()-30*p,content:"오늘 점심 메뉴 추천 받습니다. 뭐가 좋을까요?",likeUsers:[]},{id:4,author:"박민수",time:Date.now()-30*p,content:"주말에 등산 가실 분 계신가요? 함께 가요!",likeUsers:[]},{id:5,author:"정수연",time:Date.now()-2*rt,content:"새로 나온 영화 재미있대요. 같이 보러 갈 사람?",likeUsers:[]}],error:null},{logout(t){return g.reset(),{...t,currentUser:null,loggedIn:!1}}}),at=({id:t,author:e,time:n,content:r,likeUsers:a,activationLike:o=!1})=>{const{loggedIn:l,currentUser:i,posts:c}=u.getState(),w=l&&a.find(E=>E===i.username),S=E=>{if(E.preventDefault(),!l){alert("로그인 후 이용해주세요");return}const O=c.find(f=>f.id===t);let v=[];O.likeUsers.includes(i.username)?v=a.filter(f=>f!==i.username):v=[...a,i.username];const J={...O,likeUsers:v},R=c.map(f=>f.id===t?J:f);u.setState({posts:R})};return s("div",{className:"bg-white rounded-lg shadow p-4 mb-4"},s("div",{className:"flex items-center mb-2"},s("div",null,s("div",{className:"font-bold"},e),s("div",{className:"text-gray-500 text-sm"},nt(n)))),s("p",null,r),s("div",{className:"mt-2 flex justify-between text-gray-500"},s("span",{className:`like-button cursor-pointer${w?" text-blue-500":""}`,onClick:S},"좋아요 ",a.length),s("span",null,"댓글"),s("span",null,"공유")))},ot=()=>{const{currentUser:t,posts:e}=u.getState();let n="";return s("div",{className:"mb-4 bg-white rounded-lg shadow p-4"},s("textarea",{id:"post-content",placeholder:"무슨 생각을 하고 계신가요?",className:"w-full p-2 border rounded",onChange:r=>{n=r.target.value}}),s("button",{id:"post-submit",className:"mt-2 bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>{u.setState({posts:[...e,{id:e.length+1,author:t.username,time:Date.now(),content:n,likeUsers:[]}]})}},"게시"))},H=()=>s("header",{className:"bg-blue-600 text-white p-4 sticky top-0"},s("h1",{className:"text-2xl font-bold"},"항해플러스")),B=()=>s("footer",{className:"bg-gray-200 p-4 text-center"},s("p",null,"© $",new Date().getFullYear()," 항해플러스. All rights reserved.")),h={value:null,get(){return this.value},set(t){this.value=t}},A=t=>window.location.pathname===t?"text-blue-600 font-bold":"text-gray-600";function U({onClick:t,children:e,...n}){return s("a",{onClick:a=>{a.preventDefault(),t==null||t(),h.get().push(a.target.href.replace(window.location.origin,""))},...n},e)}const G=()=>{const{loggedIn:t}=u.getState(),{logout:e}=u.actions;return s("nav",{className:"bg-white shadow-md p-2 sticky top-14"},s("ul",{className:"flex justify-around"},s("li",null,s(U,{href:"/",className:A("/")},"홈")),!t&&s("li",null,s(U,{href:"/login",className:A("/login")},"로그인")),t&&s("li",null,s(U,{href:"/profile",className:A("/profile")},"프로필")),t&&s("li",null,s("a",{href:"#",id:"logout",className:"text-gray-600",onClick:n=>{n.preventDefault(),e()}},"로그아웃"))))},mt=()=>{const{posts:t,loggedIn:e}=u.getState();return s("div",{className:"bg-gray-100 min-h-screen flex justify-center"},s("div",{className:"max-w-md w-full"},s(H,null),s(G,null),s("main",{className:"p-4"},e?s(ot,null):"",s("div",{id:"posts-container",className:"space-y-4"},[...t].sort((n,r)=>r.time-n.time).map(n=>s(at,{...n,activationLike:!1})))),s(B,null)))};function lt(t){const e={username:t,email:"",bio:""};u.setState({currentUser:e,loggedIn:!0}),g.set(e)}const pt=()=>s("div",{className:"bg-gray-100 flex items-center justify-center min-h-screen"},s("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md"},s("h1",{className:"text-2xl font-bold text-center text-blue-600 mb-8"},"항해플러스"),s("form",{id:"login-form",onSubmit:e=>{e.preventDefault();const n=document.getElementById("username").value;lt(n)}},s("input",{type:"text",id:"username",placeholder:"사용자 이름",className:"w-full p-2 mb-4 border rounded",required:!0}),s("input",{type:"password",placeholder:"비밀번호",className:"w-full p-2 mb-6 border rounded",required:!0}),s("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded"},"로그인")),s("div",{className:"mt-4 text-center"},s("a",{href:"#",className:"text-blue-600 text-sm"},"비밀번호를 잊으셨나요?")),s("hr",{className:"my-6"}),s("div",{className:"text-center"},s("button",{className:"bg-green-500 text-white px-4 py-2 rounded"},"새 계정 만들기")))),ct=()=>s("main",{className:"bg-gray-100 flex items-center justify-center min-h-screen"},s("div",{className:"bg-white p-8 rounded-lg shadow-md w-full text-center",style:"max-width: 480px"},s("h1",{className:"text-2xl font-bold text-blue-600 mb-4"},"항해플러스"),s("p",{className:"text-4xl font-bold text-gray-800 mb-4"},"404"),s("p",{className:"text-xl text-gray-600 mb-8"},"페이지를 찾을 수 없습니다"),s("p",{className:"text-gray-600 mb-8"},"요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다."),s("a",{href:"/","data-link":"",className:"bg-blue-600 text-white px-4 py-2 rounded font-bold"},"홈으로 돌아가기")));function it(t){const e={...u.getState().currentUser,...t};u.setState({currentUser:e}),g.set(e),alert("프로필이 업데이트되었습니다.")}const dt=()=>{const{loggedIn:t,currentUser:e}=u.getState(),{username:n="",email:r="",bio:a=""}=e??{};return s("div",{className:"bg-gray-100 min-h-screen flex justify-center"},s("div",{className:"max-w-md w-full"},s(H,null),s(G,{loggedIn:t}),s("main",{className:"p-4"},s("div",{className:"bg-white p-8 rounded-lg shadow-md"},s("h2",{className:"text-2xl font-bold text-center text-blue-600 mb-8"},"내 프로필"),s("form",{id:"profile-form",onSubmit:l=>{l.preventDefault();const i=new FormData(l.target),c=Object.fromEntries(i);it(c)}},s("div",{className:"mb-4"},s("label",{for:"username",className:"block text-gray-700 text-sm font-bold mb-2"},"사용자 이름"),s("input",{type:"text",id:"username",name:"username",className:"w-full p-2 border rounded",value:n,required:!0})),s("div",{className:"mb-4"},s("label",{for:"email",className:"block text-gray-700 text-sm font-bold mb-2"},"이메일"),s("input",{type:"email",id:"email",name:"email",className:"w-full p-2 border rounded",value:r,required:!0})),s("div",{className:"mb-6"},s("label",{for:"bio",className:"block text-gray-700 text-sm font-bold mb-2"},"자기소개"),s("textarea",{id:"bio",name:"bio",rows:"4",className:"w-full p-2 border rounded"},a)),s("button",{type:"submit",className:"w-full bg-blue-600 text-white p-2 rounded font-bold"},"프로필 업데이트")))),s(B,null)))},y=class y extends Error{constructor(){super(y.MESSAGE)}};L(y,"MESSAGE","ForbiddenError");let j=y;const x=class x extends Error{constructor(){super(x.MESSAGE)}};L(x,"MESSAGE","UnauthorizedError");let M=x;function gt(){const t=h.get().getTarget()??ct,e=document.querySelector("#root");try{_(s(t,null),e)}catch(n){if(n instanceof j){h.get().push("/");return}if(n instanceof M){h.get().push("/login");return}console.error(n)}}export{j as F,mt as H,pt as L,dt as P,M as U,gt as a,s as b,ft as c,F as d,u as g,h as r};
